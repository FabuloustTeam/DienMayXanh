package com.dienmayxanh.testcase;

import org.testng.annotations.Test;

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.openqa.selenium.support.ui.ExpectedConditions;
import com.dienmayxanh.abstractclass.*;

public class LogIn extends AbstractAnnotation {
	public String baseUrl = "https://www.dienmayxanh.com";
	public WebDriver driver;

	/**
	 * Test Requirement: TR-DMX-Login-02. TestCaseID: TC-DMX-Login-02
	 */
	@Test(priority=1)
	public void NhapSDTChuaChuCai() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p chá»¯ vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone1 = waitForElementClickable(By.name("txtPhoneNumber"));
		phone1.sendKeys("090dwwwr");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c'
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();

		String expectedError = "Sá»‘ Ä‘iá»‡n thoáº¡i trá»‘ng/khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng";
		String error = waitForElementClickable(By.xpath("//*[@name='txtPhoneNumber']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();

	}

	/**
	 * Test Requirement: TR-DMX-Login-02. TestCaseID: TC-DMX-Login-03
	 */
	@Test(priority=2)
	public void ChuaKiTuDacBiet() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p kÃ­ tá»± Ä‘áº·c biá»‡t vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone2 = waitForElementClickable(By.name("txtPhoneNumber"));
		phone2.sendKeys("575(){'.");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c'
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();

		String expectedError = "Sá»‘ Ä‘iá»‡n thoáº¡i trá»‘ng/khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng";
		String error = waitForElementClickable(By.xpath("//*[@name='txtPhoneNumber']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-02. TestCaseID: TC-DMX-Login-04
	 */
	@Test(priority=3)
	public void SaiSDT() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng cÃ³ tháº­t vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone3 = waitForElementClickable(By.name("txtPhoneNumber"));
		phone3.sendKeys("5412368521");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c'
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();

		String expectedError = "Sá»‘ Ä‘iá»‡n thoáº¡i trá»‘ng/khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng";
		String error = waitForElementClickable(By.xpath("//*[@name='txtPhoneNumber']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-03. TestCaseID: TC-DMX-Login-05
	 */
	@Test(priority=4)
	public void KhongNhapSDT() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Bá»? trá»‘ng trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone4 = waitForElementClickable(By.name("txtPhoneNumber"));
		phone4.sendKeys("");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c'
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();

		String expectedError = "Sá»‘ Ä‘iá»‡n thoáº¡i trá»‘ng/khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng";
		String error = waitForElementClickable(By.xpath("//*[@name='txtPhoneNumber']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-03. TestCaseID: TC-DMX-Login-06
	 */
	@Test(priority=5)
	public void NhapKhoangTrang() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p khoáº£ng tráº¯ng vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone5 = waitForElementClickable(By.name("txtPhoneNumber"));
		phone5.sendKeys("     ");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c'
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();

		String expectedError = "Sá»‘ Ä‘iá»‡n thoáº¡i trá»‘ng/khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng";
		String error = waitForElementClickable(By.xpath("//*[@name='txtPhoneNumber']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-04. TestCaseID: TC-DMX-Login-07
	 */
	@Test(priority=6)
	public void NhapSaiMaOTP() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0342256477");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(5000);
		// Nháº­p sai mÃ£ xÃ¡c nháº­n vÃ o trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp.sendKeys("4512");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* MÃ£ xÃ¡c nháº­n khÃ´ng Ä‘Ãºng, vui lÃ²ng thá»­ láº¡i.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-05. TestCaseID: TC-DMX-Login-08
	 */
	@Test(priority=7)
	public void NhapKhongDuSo() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0348775124");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(5000);
		// Nháº­p khÃ´ng Ä‘á»§ 4 chá»¯ sá»‘ mÃ£ xÃ¡c nháº­n vÃ o trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp1 = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp1.sendKeys("452");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* Vui lÃ²ng nháº­p mÃ£ OTP.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-06. TestCaseID: TC-DMX-Login-09
	 */
	@Test(priority=8)
	public void OTPChuaChuCai() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0341235789");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(5000);
		// Nháº­p chá»¯ vÃ o trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp2 = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp2.sendKeys("45a2");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* MÃ£ xÃ¡c nháº­n khÃ´ng Ä‘Ãºng, vui lÃ²ng thá»­ láº¡i.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-06. TestCaseID: TC-DMX-Login-010
	 */
	@Test(priority=9)
	public void OTPChuaKiTuDacBiet() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0386586541");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(7000);
		// Nháº­p kÃ­ tá»± Ä‘áº·c biá»‡t vÃ o trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp3 = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp3.sendKeys("4>?2");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* MÃ£ xÃ¡c nháº­n khÃ´ng Ä‘Ãºng, vui lÃ²ng thá»­ láº¡i.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-07. TestCaseID: TC-DMX-Login-011
	 */
	@Test(priority=10)
	public void OTPNhapKhoangTrang() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0345154856");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(5000);
		// Nháº­p khoáº£ng tráº¯ng vÃ o trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp4 = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp4.sendKeys("    ");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* MÃ£ xÃ¡c nháº­n khÃ´ng Ä‘Ãºng, vui lÃ²ng thá»­ láº¡i.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-07. TestCaseID: TC-DMX-Login-012
	 */
	@Test(priority=11)
	public void BoTrongOTP() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0389852132");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
//		Thread.sleep(5000);
		// Bá»? trá»‘ng trÆ°á»?ng 'Nháº­p mÃ£ xÃ¡c nháº­n gá»“m 4 sá»‘'
		WebElement otp5 = waitForElementClickable(By.xpath("//input[@name='txtOTP']"));
		otp5.sendKeys("");
//		Thread.sleep(5000);
		// Nháº¥n chá»?n "Tiáº¿p tá»¥c" hoáº·c phÃ­m Enter.
		WebElement code = waitForElementClickable(By.xpath("//*[@id=\"frmSubmitVerifyCode\"]/button"));
		code.click();

		String expectedError = "* Vui lÃ²ng nháº­p mÃ£ OTP.";
		String error = waitForElementClickable(By.xpath("//*[@name='txtOTP']//following::label[1]")).getText();
		Assert.assertEquals(error, expectedError);

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-08. TestCaseID: TC-DMX-Login-013
	 */
	@Test(priority=12)
	public void ThongBaoGuiLaiMa() throws InterruptedException {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();
		// Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i vÃ o trÆ°á»?ng 'Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i mua hÃ ng'.
		WebElement phone = waitForElementClickable(By.name("txtPhoneNumber"));
		phone.sendKeys("0345468365");
		// Nháº¥n Enter hoáº·c chá»?n 'Tiáº¿p tá»¥c' vÃ  Ä‘á»£i mÃ£ xÃ¡c nháº­n Ä‘Æ°á»£c gá»­i vá»? SMS.
		WebElement login = waitForElementClickable(By.xpath("//*[@id=\"frmGetVerifyCode\"]/button"));
		login.click();
		Thread.sleep(35000);
		// Nháº¥n chá»?n "TÃ´i khÃ´ng nháº­n Ä‘Æ°á»£c mÃ£, vui lÃ²ng gá»­i láº¡i"
		WebElement thongbao = waitForElementClickable(By.xpath("//a[@class='resend-sms']"));
		thongbao.click();

		driver.close();
	}

	/**
	 * Test Requirement: TR-DMX-Login-10. TestCaseID: TC-DMX-Login-015
	 */
	@Test(priority=13)
	public void TestTitle() {
		System.out.println("lauching chrome browser");
		driver = new ChromeDriver();
		driver.get(baseUrl);
		// Nháº¥n chá»?n "Lá»‹ch sá»­ mua hÃ ng" trÃªn thanh Header
		WebElement weblogin = waitForElementClickable(By.xpath("//a[@href='/lich-su-mua-hang']"));
		weblogin.click();

		String expectedTitle = "Lá»‹ch sá»­ mua hÃ ng | Dienmayxanh.com | Dienmayxanh.com";
		String actualTitle = driver.getTitle();
		Assert.assertEquals(actualTitle, expectedTitle);

		driver.close();

	}

	private WebElement waitForElementClickable(By locator) {
		// TODO Auto-generated method stub
		WebDriverWait wait = new WebDriverWait(this.driver, 10);
		return wait.until(ExpectedConditions.elementToBeClickable(locator));
	}
}